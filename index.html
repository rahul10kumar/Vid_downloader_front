<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Video Downloader</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-5">

<div class="container">
  <h1 class="mb-4">YouTube Video Downloader</h1>
  <input id="url" type="text" class="form-control mb-3" placeholder="Enter YouTube URL">
  <button id="fetch" class="btn btn-primary mb-3">Get Video</button>

  <div id="videoInfo"></div>
</div>

<script>
document.getElementById('fetch').addEventListener('click', async () => {
  const url = document.getElementById('url').value;
  if (!url) return alert('Enter a YouTube URL');

  const res = await fetch('/getVideo', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ url })
  });
  const data = await res.json();
  if (data.error) return alert(data.error);

  const infoDiv = document.getElementById('videoInfo');
  infoDiv.innerHTML = `<h3>${data.title}</h3><p>By ${data.author}</p>`;
  
  const list = document.createElement('ul');
  list.classList.add('list-group');

  data.formats.forEach(f => {
    const li = document.createElement('li');
    li.classList.add('list-group-item', 'd-flex', 'justify-content-between', 'align-items-center');
    li.innerHTML = `${f.quality} (${f.container}) - ${f.size} <a class="btn btn-sm btn-success" href="/download?url=${encodeURIComponent(url)}&itag=${f.itag}">Download</a>`;
    list.appendChild(li);
  });

  infoDiv.appendChild(list);
});
</script>
</body>
</html>
